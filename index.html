<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title Here</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/slider.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">

  </head>
  <body>
    <h1>Title Here</h1>

    <div class="inputs" style="width: 450px;">
      <div class="input-group">
        <span style="width: 150px;">Inflation Rate</span>
        &nbsp;
        <input type="text" id="InflationRateSlider" class="slider" data-slider-min="10" data-slider-max="40" data-slider-step="1" data-slider-value="29">
        &nbsp;
        <input type="text" id="InflationRateBox" style="width: 50px;" value="2.9 %">
      </div>

    <div class="inputs" style="width: 450px;">
      <div class="input-group">
        <span style="width: 150px;">Bond Rate</span>
        &nbsp;
        <input type="text" id="BondRateSlider" class="slider" data-slider-min="20" data-slider-max="60" data-slider-step="1" data-slider-value="38">
        &nbsp;
        <input type="text" id="BondRateBox" style="width: 50px;" value="3.8 %">
      </div>

      <div class="input-group">
      <span style="width: 150px;">Degree Band</span>
      &nbsp;
      <select class="selectpicker" style="width: 200px;">
        <option>Band 1</option>
        <option>Band 2</option>
        <option>Band 3</option>
        <option>Band 4</option>
        <option>Band 5</option>
      </select>
      </div>

    <div class="inputs" style="width: 450px;">
      <div class="input-group">
        <span style="width: 150px;">Degree Length</span>
        &nbsp;
        <input type="text" id="DegreeLengthSlider" class="slider" data-slider-min="3" data-slider-max="6" data-slider-step="1" data-slider-value="3">
        &nbsp;
        <input type="text" id="DegreeLengthBox" style="width: 50px;" value="3">
      </div>

    <div class="inputs" style="width: 450px;">
      <div class="input-group">
        <span style="width: 150px;">Gap Years</span>
        &nbsp;
        <input type="text" id="GapYearSlider" class="slider" data-slider-min="0" data-slider-max="10" data-slider-step="1" data-slider-value="3">
        &nbsp;
        <input type="text" id="GapYearBox" style="width: 50px;" value="3">
      </div>

    <div class="inputs" style="width: 450px;">
      <div class="input-group">
        <span style="width: 150px;">Starting Salary</span>
        &nbsp;
        <input type="text" id="StartingSalarySlider" class="slider" data-slider-min="30" data-slider-max="100" data-slider-step="5" data-slider-value="40">
        &nbsp;
        <input type="text" id="StartingSalaryBox" style="width: 50px;" value="$ 40 K">
      </div>

      <div class="input-group">
        <span style="width: 150px;">Salary Increase</span>
        &nbsp;
        <input type="text" id="SalaryIncreaseSlider" class="slider" data-slider-min="0" data-slider-max="100" data-slider-step="5" data-slider-value="29">
        &nbsp;
        <input type="text" id="SalaryIncreaseBox" style="width: 50px;" value="4.0 %">
      </div>

    </div>

    <div id="container" style="width: 800px; height: 400px; margin: 0 auto"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-slider.js"></script>
    <script src="js/highcharts.js"></script>

    <script>
      var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        credits: {enabled: false},
        title: {text: 'Effect of deregulation'},
        xAxis: {categories: ['Before', 'After']},
        yAxis: {
            min: 0,
            title: {text: 'Money $'},
        },
        legend: {
            align: 'right',
            x: -70,
            verticalAlign: 'top',
            y: 20,
            floating: true,
            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
            borderColor: '#CCC',
            borderWidth: 1,
            shadow: false
        },
        tooltip: {enabled: false},
        plotOptions: {
            column: {
                stacking: 'normal',
            }
        },
        series: [{
            name: 'Interest',
            data: [0, 40000]
        }, {
            name: 'Fees',
            data: [30000, 100000]
        }]
      });

      function updateChart(interest, fees) {
        chart.series[0].setData(interest)
        chart.series[1].setData(fees)
      }

      /*    Setup Sliders    */
      var sliderOptions = {
        tooltip: "hide",
      }

      var InflationRateSlider = $('#InflationRateSlider').slider(sliderOptions)
      InflationRateSlider.on('slide', function(ev){
          $('#InflationRateBox').val((ev.value/10.).toFixed(1) + " %");
          updateAll();
      });

      var BondRateSlider = $('#BondRateSlider').slider(sliderOptions)
      BondRateSlider.on('slide', function(ev){
          $('#BondRateBox').val((ev.value/10.).toFixed(1) + " %");
          updateAll();
        });

      var DegreeLengthSlider = $('#DegreeLengthSlider').slider(sliderOptions)
      DegreeLengthSlider.on('slide', function(ev){
          $('#DegreeLengthBox').val(ev.value);
          updateAll();
        });

      var GapYearSlider = $('#GapYearSlider').slider(sliderOptions)
      GapYearSlider.on('slide', function(ev){
          $('#GapYearBox').val(ev.value);
          updateAll();
        });

      var StartingSalarySlider = $('#StartingSalarySlider').slider(sliderOptions)
      StartingSalarySlider.on('slide', function(ev){
          $('#StartingSalaryBox').val("$" + ((ev.value >= 100) ? "" : " ") + ev.value.toString() + " K");
          updateAll();
        });

      var SalaryIncreaseSlider = $('#SalaryIncreaseSlider').slider(sliderOptions)
      SalaryIncreaseSlider.on('slide', function(ev){
          $('#SalaryIncreaseBox').val((ev.value/10.).toFixed(1) + " %");
          updateAll();
        });

      function getData() {
        return {
          'InflationRate': InflationRateSlider.data('slider').getValue() / 1000.,
          'BondRate': BondRateSlider.data('slider').getValue() / 1000.,
          'DegreeBand': 3, // TODO
          'DegreeLength': DegreeLengthSlider.data('slider').getValue(),
          'GapYear': GapYearSlider.data('slider').getValue(),
          'StartingSalary': StartingSalarySlider.data('slider').getValue() * 1000,
          'SalaryIncrease': SalaryIncreaseSlider.data('slider').getValue() / 1000,
        };
      }

    function updateAll() {
      /* Compute costs and update chart */
      var data = getData();
      // TODO

      updateChart([10000, 40000], [20000, 120000]);
    }

    updateAll();
    </script>
  </body>

</html>
